{"version":3,"sources":["store/session.js","store/devices.js","store/positions.js","store/index.js","common/localization.js","RemoveDialog.js","EditCollectionView.js","reactHelper.js","DevicesList.js","MainToolbar.js","map/switcher/switcher.js","common/deviceCategories.js","map/mapUtil.js","map/mapStyles.js","map/Map.js","common/preferences.js","map/SelectedDeviceMap.js","map/AccuracyMap.js","map/GeofenceMap.js","common/formatter.js","map/StatusView.js","map/PositionsMap.js","map/CurrentPositionsMap.js","map/CurrentLocationMap.js","MainPage.js","LoginPage.js","reports/RouteReportPage.js","attributes/AddAttributeDialog.js","attributes/EditAttributesView.js","attributes/deviceAttributes.js","attributes/userAttributes.js","admin/ServerPage.js","admin/UsersPage.js","EditItemView.js","form/SelectField.js","form/LinkField.js","common/stringUtils.js","DevicePage.js","UserPage.js","SocketController.js","settings/NotificationsPage.js","settings/NotificationPage.js","settings/GroupsPage.js","settings/GroupPage.js","PositionPage.js","reports/FilterForm.js","map/ReplayPathMap.js","reports/ReplayPage.js","App.js","serviceWorker.js","index.js"],"names":["createSlice","name","initialState","server","user","reducers","updateServer","state","action","payload","updateUser","reducer","actions","items","selectedId","refresh","forEach","item","update","select","id","remove","combineReducers","session","devices","positions","configureStore","supportedLanguages","data","af","ar","az","bg","bn","cs","de","da","el","en","es","fa","fi","fr","he","hi","hr","hu","it","ja","ka","kk","km","languages","undefined","window","navigator","slice","language","userLanguage","push","substring","i","length","replace","selectedLanguage","key","RemoveDialog","open","endpoint","itemId","onResult","handleRemove","a","fetch","method","ok","Dialog","onClose","DialogContent","DialogContentText","t","DialogActions","Button","color","onClick","autoFocus","useStyles","makeStyles","theme","fab","position","bottom","spacing","right","EditCollectionView","content","editPath","classes","history","useHistory","useState","setSelectedId","selectedAnchorEl","setSelectedAnchorEl","removeDialogShown","setRemoveDialogShown","Date","now","updateTimestamp","setUpdateTimestamp","menuHide","Content","onMenuClick","anchorId","Fab","size","className","Menu","anchorEl","MenuItem","useEffectAsync","effect","deps","useEffect","list","maxHeight","overflow","icon","width","height","filter","DeviceView","dispatch","useDispatch","useSelector","Object","values","response","devicesActions","json","List","map","index","ListItem","button","ListItemAvatar","Avatar","src","category","alt","ListItemText","primary","secondary","uniqueId","ListItemSecondaryAction","IconButton","event","currentTarget","Divider","DevicesList","flex","flexGrow","appBar","zIndex","drawer","menuButton","marginLeft","marginRight","MainToolbar","setDrawer","adminEnabled","administrator","userId","closeDrawer","handleLogout","sessionActions","AppBar","Toolbar","Typography","variant","Drawer","tabIndex","role","onKeyDown","ListItemIcon","subheader","ListSubheader","disabled","SwitcherControl","styles","defaultStyle","beforeSwitch","afterSwitch","this","onDocumentClick","bind","controlContainer","document","createElement","classList","add","mapStyleContainer","styleButton","type","style","styleElement","innerText","title","dataset","uri","JSON","stringify","addEventListener","srcElement","contains","setStyle","parse","display","elms","getElementsByClassName","appendChild","parentNode","removeEventListener","removeChild","target","deviceCategories","loadImage","url","Promise","imageLoaded","image","Image","onload","loadIcon","background","pixelRatio","devicePixelRatio","canvas","context","getContext","drawImage","imageWidth","imageHeight","getImageData","reverseCoordinates","Array","isArray","Number","isNaN","coordinates","styleMapbox","element","mapboxgl","Map","container","version","sources","osm","tiles","attribution","glyphs","layers","source","ready","readyListeners","Set","updateReadyValue","value","listener","initMap","all","hasImage","imageData","addImage","on","addControl","NavigationControl","showCompass","waiting","loaded","setTimeout","defaultValue","children","containerEl","useRef","mapReady","setMapReady","mapboxAccessToken","forceSettings","attributes","accessToken","addReadyListener","delete","removeReadyListener","useLayoutEffect","currentEl","current","resize","ref","SelectedDeviceMap","mapCenter","longitude","latitude","easeTo","center","AccuracyMap","features","accuracy","circle","addSource","addLayer","removeLayer","removeSource","getSource","setData","GeofenceMap","geofences","setGeofences","wellknown","area","geometry","properties","formatPosition","moment","format","toFixed","formatNumber","formatBoolean","precision","StatusView","deviceId","onShowDetails","device","status","speed","course","totalDistance","batteryLevel","href","e","preventDefault","PositionsMap","createFeature","onMouseEnter","getCanvas","cursor","onMouseLeave","onClickCallback","useCallback","feature","Math","abs","lngLat","lng","placeholder","ReactDOM","render","store","positionId","Popup","offset","anchor","setDOMContent","setLngLat","addTo","from","getContainer","off","CurrentPositionsMap","CurrentLocationMap","control","GeolocateControl","positionOptions","enableHighAccuracy","timeout","trackUserLocation","removeControl","root","flexDirection","breakpoints","down","drawerPaper","up","mapContainer","withWidth","isWidthUp","paper","marginTop","alignItems","padding","logo","buttons","justifyContent","flexBasis","LoginPage","failed","setFailed","email","setEmail","password","setPassword","handleLogin","body","URLSearchParams","Paper","onSubmit","TextField","margin","required","fullWidth","error","label","autoComplete","onChange","helperText","FormControl","form","RouteReportPage","setDeviceId","period","setPeriod","subtract","setFrom","to","setTo","Grid","xs","md","lg","InputLabel","Select","HTML5_FMT","DATETIME_LOCAL","selectedFrom","selectedTo","startOf","endOf","query","toISOString","toString","headers","then","TableContainer","component","Table","TableHead","TableRow","TableCell","TableBody","AddAttributeDialog","definitions","createFilterOptions","option","options","entries","setKey","setType","maxWidth","Autocomplete","_","filterOptions","params","filtered","inputValue","getOptionLabel","renderOption","freeSolo","renderInput","addButton","marginBottom","removeButton","EditAttributesView","setAttributes","addDialogShown","setAddDialogShown","updateAttribute","updatedAttributes","deleteAttribute","getAttributeName","definition","getAttributeType","booleanList","otherList","concat","convertToList","direction","justify","FormControlLabel","Checkbox","checked","FilledInput","endAdornment","InputAdornment","startIcon","details","ServerPage","setItem","updatedItem","handleSave","goBack","Container","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","announcement","registration","readonly","deviceReadonly","limitCommands","userAttributes","deviceAttributes","columnAction","UsersView","setItems","UsersPage","EditItemView","useParams","SelectField","multiple","keyGetter","titleGetter","LinkField","endpointAll","endpointLinked","baseId","keyBase","keyLink","linked","setLinked","createBody","linkId","oldValue","newValue","includes","added","removed","prefixString","prefix","charAt","toUpperCase","DevicePage","groupId","phone","model","contact","c","UserPage","connect","authenticated","connectSocket","protocol","location","socket","WebSocket","host","onclose","onmessage","positionsActions","events","displayNotifications","Notification","permission","notification","close","requestPermission","NotificationsView","formatList","split","Boolean","join","always","alarms","notificators","NotificationsPage","NotificationPage","predicate","startsWith","keys","toLowerCase","GroupsView","GroupsPage","GroupPage","PositionPage","formatKey","combinedList","attributesList","FilterForm","ReplayPathMap","bounds","reduce","extend","LngLatBounds","fitBounds","top","left","controlPanel","transform","controlContent","configForm","TimeLabel","Tooltip","enterTouchDelay","placement","ReplayPage","expanded","setExpanded","setPositions","setIndex","handleShow","Slider","max","step","marks","valueLabelDisplay","valueLabelFormat","ValueLabelComponent","align","App","initialized","CssBaseline","exact","path","MainPage","LinearProgress","isLocalhost","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","getElementById","URL","process","origin","contentType","get","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.404aac67.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'session',\n  initialState: {\n    server: null,\n    user: null,\n  },\n  reducers: {\n    updateServer(state, action) {\n      state.server = action.payload;\n    },\n    updateUser(state, action) {\n      state.user = action.payload;\n    },\n  },\n});\n\nexport { actions as sessionActions };\nexport { reducer as sessionReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'devices',\n  initialState: {\n    items: {},\n    selectedId: null\n  },\n  reducers: {\n    refresh(state, action) {\n      state.items = {};\n      action.payload.forEach(item => state.items[item['id']] = item);\n    },\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['id']] = item);\n    },\n    select(state, action) {\n      state.selectedId = action.payload.id;\n    },\n    remove(state, action) {\n      delete state.items[action.payload];\n    },\n  }\n});\n\nexport { actions as devicesActions };\nexport { reducer as devicesReducer };\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst { reducer, actions } = createSlice({\n  name: 'positions',\n  initialState: {\n    items: {},\n  },\n  reducers: {\n    update(state, action) {\n      action.payload.forEach(item => state.items[item['deviceId']] = item);\n    },\n  }\n});\n\nexport { actions as positionsActions };\nexport { reducer as positionsReducer };\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\n\nimport { sessionReducer as session } from './session';\nimport { devicesReducer as devices } from './devices';\nimport { positionsReducer as positions } from './positions';\n\nconst reducer = combineReducers({\n  session,\n  devices,\n  positions,\n});\n\nexport { sessionActions } from './session';\nexport { devicesActions } from './devices';\nexport { positionsActions } from './positions';\n\nexport default configureStore({ reducer });\n","import af from '../../../web/l10n/af.json';\nimport ar from '../../../web/l10n/ar.json';\nimport az from '../../../web/l10n/az.json';\nimport bg from '../../../web/l10n/bg.json';\nimport bn from '../../../web/l10n/bn.json';\nimport cs from '../../../web/l10n/cs.json';\nimport da from '../../../web/l10n/da.json';\nimport de from '../../../web/l10n/de.json';\nimport el from '../../../web/l10n/el.json';\nimport en from '../../../web/l10n/en.json';\nimport es from '../../../web/l10n/es.json';\nimport fa from '../../../web/l10n/fa.json';\nimport fi from '../../../web/l10n/fi.json';\nimport fr from '../../../web/l10n/fr.json';\nimport he from '../../../web/l10n/he.json';\nimport hi from '../../../web/l10n/hi.json';\nimport hr from '../../../web/l10n/hr.json';\nimport hu from '../../../web/l10n/hu.json';\nimport id from '../../../web/l10n/id.json';\nimport it from '../../../web/l10n/it.json';\nimport ja from '../../../web/l10n/ja.json';\nimport ka from '../../../web/l10n/ka.json';\nimport kk from '../../../web/l10n/kk.json';\nimport km from '../../../web/l10n/km.json';\nimport ko from '../../../web/l10n/ko.json';\nimport lo from '../../../web/l10n/lo.json';\nimport lt from '../../../web/l10n/lt.json';\nimport lv from '../../../web/l10n/lv.json';\nimport ml from '../../../web/l10n/ml.json';\nimport ms from '../../../web/l10n/ms.json';\nimport nb from '../../../web/l10n/nb.json';\nimport ne from '../../../web/l10n/ne.json';\nimport nl from '../../../web/l10n/nl.json';\nimport nn from '../../../web/l10n/nn.json';\nimport pl from '../../../web/l10n/pl.json';\nimport pt from '../../../web/l10n/pt.json';\nimport pt_BR from '../../../web/l10n/pt_BR.json';\nimport ro from '../../../web/l10n/ro.json';\nimport ru from '../../../web/l10n/ru.json';\nimport si from '../../../web/l10n/si.json';\nimport sk from '../../../web/l10n/sk.json';\nimport sl from '../../../web/l10n/sl.json';\nimport sq from '../../../web/l10n/sq.json';\nimport sr from '../../../web/l10n/sr.json';\nimport sv from '../../../web/l10n/sv.json';\nimport ta from '../../../web/l10n/ta.json';\nimport th from '../../../web/l10n/th.json';\nimport tr from '../../../web/l10n/tr.json';\nimport uk from '../../../web/l10n/uk.json';\nimport uz from '../../../web/l10n/uz.json';\nimport vi from '../../../web/l10n/vi.json';\nimport zh from '../../../web/l10n/zh.json';\nimport zh_TW from '../../../web/l10n/zh_TW.json';\n\nconst supportedLanguages = {\n  'af': { data: af, name: 'Afrikaans' },\n  'ar': { data: ar, name: '' },\n  'az': { data: az, name: 'Azrbaycanca' },\n  'bg': { data: bg, name: '' },\n  'bn': { data: bn, name: '' },\n  'cs': { data: cs, name: 'etina' },\n  'de': { data: de, name: 'Deutsch' },\n  'da': { data: da, name: 'Dansk' },\n  'el': { data: el, name: '' },\n  'en': { data: en, name: 'English' },\n  'es': { data: es, name: 'Espaol' },\n  'fa': { data: fa, name: '' },\n  'fi': { data: fi, name: 'Suomi' },\n  'fr': { data: fr, name: 'Franais' },\n  'he': { data: he, name: '' },\n  'hi': { data: hi, name: '' },\n  'hr': { data: hr, name: 'Hrvatski' },\n  'hu': { data: hu, name: 'Magyar' },\n  'id': { data: id, name: 'Bahasa Indonesia' },\n  'it': { data: it, name: 'Italiano' },\n  'ja': { data: ja, name: '' },\n  'ka': { data: ka, name: '' },\n  'kk': { data: kk, name: '' },\n  'ko': { data: ko, name: '' },\n  'km': { data: km, name: '' },\n  'lo': { data: lo, name: '' },\n  'lt': { data: lt, name: 'Lietuvi' },\n  'lv': { data: lv, name: 'Latvieu' },\n  'ml': { data: ml, name: '' },\n  'ms': { data: ms, name: ' ' },\n  'nb': { data: nb, name: 'Norsk bokml' },\n  'ne': { data: ne, name: '' },\n  'nl': { data: nl, name: 'Nederlands' },\n  'nn': { data: nn, name: 'Norsk nynorsk' },\n  'pl': { data: pl, name: 'Polski' },\n  'pt': { data: pt, name: 'Portugus' },\n  'pt_BR': { data: pt_BR, name: 'Portugus (Brasil)' },\n  'ro': { data: ro, name: 'Romn' },\n  'ru': { data: ru, name: '' },\n  'si': { data: si, name: '' },\n  'sk': { data: sk, name: 'Slovenina' },\n  'sl': { data: sl, name: 'Slovenina' },\n  'sq': { data: sq, name: 'Shqipria' },\n  'sr': { data: sr, name: 'Srpski' },\n  'sv': { data: sv, name: 'Svenska' },\n  'ta': { data: ta, name: '' },\n  'th': { data: th, name: '' },\n  'tr': { data: tr, name: 'Trke' },\n  'uk': { data: uk, name: '' },\n  'uz': { data: uz, name: 'Ozbekcha' },\n  'vi': { data: vi, name: 'Ting Vit' },\n  'zh': { data: zh, name: '' },\n  'zh_TW': { data: zh_TW, name: ' (Taiwan)' }\n};\n\nconst languages = window.navigator.languages !== undefined ? window.navigator.languages.slice() : [];\nlet language = window.navigator.userLanguage || window.navigator.language;\nlanguages.push(language);\nlanguages.push(language.substring(0, 2));\nlanguages.push('en');\nfor (let i = 0; i < languages.length; i++) {\n  language = languages[i].replace('-', '_');\n  if (language in supportedLanguages) {\n    break;\n  }\n  if (language.length > 2) {\n    language = languages[i].substring(0, 2);\n    if (language in supportedLanguages) {\n      break;\n    }\n  }\n}\n\nconst selectedLanguage = supportedLanguages[language];\n\nexport const findStringKeys = (predicate) => {\n  return Object.keys(selectedLanguage.data).filter(predicate);\n}\n\nexport default key => {\n  return selectedLanguage.data[key];\n};\n","import t from './common/localization'\nimport React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\n\nconst RemoveDialog = ({ open, endpoint, itemId, onResult }) => {\n  const handleRemove = async () => {\n    const response = await fetch(`/api/${endpoint}/${itemId}`, { method: 'DELETE' });\n    if (response.ok) {\n      onResult(true);\n    }\n  };\n\n  return (\n    <Dialog\n      open={open}\n      onClose={() => { onResult(false) }}>\n      <DialogContent>\n        <DialogContentText>{t('sharedRemoveConfirm')}</DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" onClick={handleRemove}>{t('sharedRemove')}</Button>\n        <Button autoFocus onClick={() => onResult(false)}>{t('sharedCancel')}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default RemoveDialog;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport t from './common/localization';\nimport RemoveDialog from './RemoveDialog';\n\nconst useStyles = makeStyles(theme => ({\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n}));\n\nconst EditCollectionView = ({ content, editPath, endpoint }) => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const [selectedId, setSelectedId] = useState(null);\n  const [selectedAnchorEl, setSelectedAnchorEl] = useState(null);\n  const [removeDialogShown, setRemoveDialogShown] = useState(false);\n  const [updateTimestamp, setUpdateTimestamp] = useState(Date.now());\n\n  const menuShow = (anchorId, itemId) => {\n    setSelectedAnchorEl(anchorId);\n    setSelectedId(itemId);\n  }\n\n  const menuHide = () => {\n    setSelectedAnchorEl(null);\n  }\n\n  const handleAdd = () => {\n    history.push(editPath);\n    menuHide();\n  }\n\n  const handleEdit = () => {\n    history.push(`${editPath}/${selectedId}`);\n    menuHide();\n  }\n\n  const handleRemove = () => {\n    setRemoveDialogShown(true);\n    menuHide();\n  }\n\n  const handleRemoveResult = () => {\n    setRemoveDialogShown(false);\n    setUpdateTimestamp(Date.now());\n  }\n\n  const Content = content;\n\n  return (\n    <>\n      <Content updateTimestamp={updateTimestamp} onMenuClick={menuShow} />\n      <Fab size=\"medium\" color=\"primary\" className={classes.fab} onClick={handleAdd}>\n        <AddIcon />\n      </Fab>\n      <Menu open={!!selectedAnchorEl} anchorEl={selectedAnchorEl} onClose={menuHide}>\n        <MenuItem onClick={handleEdit}>{t('sharedEdit')}</MenuItem>\n        <MenuItem onClick={handleRemove}>{t('sharedRemove')}</MenuItem>\n      </Menu>\n      <RemoveDialog open={removeDialogShown} endpoint={endpoint} itemId={selectedId} onResult={handleRemoveResult} />\n    </>\n  );\n}\n\nexport default EditCollectionView;\n","\nimport { useRef, useEffect } from 'react';\n\nexport const usePrevious = value => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n\nexport const useEffectAsync = (effect, deps) => {\n  useEffect(() => {\n    effect();\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\n};\n","import React, { Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport { devicesActions } from './store';\nimport EditCollectionView from './EditCollectionView';\nimport { useEffectAsync } from './reactHelper';\n\nconst useStyles = makeStyles(() => ({\n  list: {\n    maxHeight: '100%',\n    overflow: 'auto',\n  },\n  icon: {\n    width: '25px',\n    height: '25px',\n    filter: 'brightness(0) invert(1)',\n  },\n}));\n\nconst DeviceView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const items = useSelector(state => Object.values(state.devices.items));\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/devices');\n    if (response.ok) {\n      dispatch(devicesActions.refresh(await response.json()));\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <List className={classes.list}>\n      {items.map((item, index, list) => (\n        <Fragment key={item.id}>\n          <ListItem button key={item.id} onClick={() => dispatch(devicesActions.select(item))}>\n            <ListItemAvatar>\n              <Avatar>\n                <img className={classes.icon} src={`images/icon/${item.category || 'default'}.svg`} alt=\"\" />\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText primary={item.name} secondary={item.uniqueId} />\n            <ListItemSecondaryAction>\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </ListItemSecondaryAction>\n          </ListItem>\n          {index < list.length - 1 ? <Divider /> : null}\n        </Fragment>\n      ))}\n    </List>\n  );\n}\n\nconst DevicesList = () => {\n  return (\n    <EditCollectionView content={DeviceView} editPath=\"/device\" endpoint=\"devices\" />\n  );\n}\n\nexport default DevicesList;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { sessionActions } from './store';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MapIcon from '@material-ui/icons/Map';\nimport BarChartIcon from '@material-ui/icons/BarChart';\nimport PeopleIcon from '@material-ui/icons/People';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport PersonIcon from '@material-ui/icons/Person';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport PauseCircleFilledIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport FormatListBulletedIcon from '@material-ui/icons/FormatListBulleted';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    flexGrow: 1\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  list: {\n    width: 250\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n}));\n\nconst MainToolbar = () => {\n  const dispatch = useDispatch();\n  const [drawer, setDrawer] = useState(false);\n  const classes = useStyles();\n  const history = useHistory();\n  const adminEnabled = useSelector(state => state.session.user && state.session.user.administrator);\n  const userId = useSelector(state => state.session.user && state.session.user.id);\n\n  const openDrawer = () => { setDrawer(true) }\n  const closeDrawer = () => { setDrawer(false) }\n\n  const handleLogout = async () => {\n    const response = await fetch('/api/session', { method: 'DELETE' });\n    if (response.ok) {\n      dispatch(sessionActions.updateUser(null));\n      history.push('/login');\n    }\n  }\n\n  return (\n    <>\n      <AppBar position=\"static\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            onClick={openDrawer}>\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.flex}>\n            Traccar\n          </Typography>\n          <Button color=\"inherit\" onClick={handleLogout}>{t('loginLogout')}</Button>\n        </Toolbar>\n      </AppBar>\n      <Drawer open={drawer} onClose={closeDrawer}>\n        <div\n          tabIndex={0}\n          className={classes.list}\n          role=\"button\"\n          onClick={closeDrawer}\n          onKeyDown={closeDrawer}>\n          <List>\n            <ListItem button onClick={() => history.push('/')}>\n              <ListItemIcon>\n                <MapIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('mapTitle')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/replay')}>\n              <ListItemIcon>\n                <ReplayIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportReplay')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('reportTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button onClick={() => history.push('/reports/route')}>\n              <ListItemIcon>\n                <TimelineIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportRoute')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <NotificationsActiveIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportEvents')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <PlayCircleFilledIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportTrips')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <PauseCircleFilledIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportStops')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <FormatListBulletedIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportSummary')} />\n            </ListItem>\n            <ListItem button disabled>\n              <ListItemIcon>\n                <TrendingUpIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('reportChart')} />\n            </ListItem>\n          </List>\n          <Divider />\n          <List\n            subheader={\n              <ListSubheader>\n                {t('settingsTitle')}\n              </ListSubheader>\n            }>\n            <ListItem button disabled={!userId} onClick={() => history.push(`/user/${userId}`)}>\n              <ListItemIcon>\n                <PersonIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsUser')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/settings/notifications')}>\n              <ListItemIcon>\n                <NotificationsIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('sharedNotifications')} />\n            </ListItem>\n            <ListItem button onClick={() => history.push('/settings/groups')}>\n              <ListItemIcon>\n                <FolderIcon />\n              </ListItemIcon>\n              <ListItemText primary={t('settingsGroups')} />\n            </ListItem>\n          </List>\n          {adminEnabled && (\n            <>\n              <Divider />\n              <List\n                subheader={\n                  <ListSubheader>\n                    {t('userAdmin')}\n                  </ListSubheader>\n                }>\n                <ListItem button onClick={() => history.push('/admin/server')}>\n                  <ListItemIcon>\n                    <StorageIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('settingsServer')} />\n                </ListItem>\n                <ListItem button onClick={() => history.push('/admin/users')}>\n                  <ListItemIcon>\n                    <PeopleIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('settingsUsers')} />\n                </ListItem>\n                <ListItem button disabled>\n                  <ListItemIcon>\n                    <BarChartIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={t('statisticsTitle')} />\n                </ListItem>\n              </List>\n            </>\n          )}\n        </div>\n      </Drawer>\n    </>\n  );\n}\n\nexport default MainToolbar;\n","export class SwitcherControl {\n\n  constructor(styles, defaultStyle, beforeSwitch, afterSwitch) {\n    this.styles = styles;\n    this.defaultStyle = defaultStyle;\n    this.beforeSwitch = beforeSwitch;\n    this.afterSwitch = afterSwitch;\n    this.onDocumentClick = this.onDocumentClick.bind(this);\n  }\n\n  getDefaultPosition() {\n    return 'top-right';\n  }\n\n  onAdd(map) {\n    this.map = map;\n    this.controlContainer = document.createElement('div');\n    this.controlContainer.classList.add('mapboxgl-ctrl');\n    this.controlContainer.classList.add('mapboxgl-ctrl-group');\n    this.mapStyleContainer = document.createElement('div');\n    this.styleButton = document.createElement('button');\n    this.styleButton.type = 'button';\n    this.mapStyleContainer.classList.add('mapboxgl-style-list');\n    for (const style of this.styles) {\n      const styleElement = document.createElement('button');\n      styleElement.type = 'button';\n      styleElement.innerText = style.title;\n      styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\n      styleElement.dataset.uri = JSON.stringify(style.uri);\n      styleElement.addEventListener('click', event => {\n        const srcElement = event.srcElement;\n        if (srcElement.classList.contains('active')) {\n          return;\n        }\n        this.beforeSwitch();\n        this.map.setStyle(JSON.parse(srcElement.dataset.uri));\n        this.afterSwitch();\n        this.mapStyleContainer.style.display = 'none';\n        this.styleButton.style.display = 'block';\n        const elms = this.mapStyleContainer.getElementsByClassName('active');\n        while (elms[0]) {\n          elms[0].classList.remove('active');\n        }\n        srcElement.classList.add('active');\n      });\n      if (style.title === this.defaultStyle) {\n        styleElement.classList.add('active');\n      }\n      this.mapStyleContainer.appendChild(styleElement);\n    }\n    this.styleButton.classList.add('mapboxgl-ctrl-icon');\n    this.styleButton.classList.add('mapboxgl-style-switcher');\n    this.styleButton.addEventListener('click', () => {\n      this.styleButton.style.display = 'none';\n      this.mapStyleContainer.style.display = 'block';\n    });\n    document.addEventListener('click', this.onDocumentClick);\n    this.controlContainer.appendChild(this.styleButton);\n    this.controlContainer.appendChild(this.mapStyleContainer);\n    return this.controlContainer;\n  }\n\n  onRemove() {\n    if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\n      return;\n    }\n    this.styleButton.removeEventListener('click', this.onDocumentClick);\n    this.controlContainer.parentNode.removeChild(this.controlContainer);\n    document.removeEventListener('click', this.onDocumentClick);\n    this.map = undefined;\n  }\n\n  onDocumentClick(event) {\n    if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\n      this.mapStyleContainer.style.display = 'none';\n      this.styleButton.style.display = 'block';\n    }\n  }\n}\n","export const deviceCategories = [\n  'default',\n  'animal',\n  'bicycle',\n  'boat',\n  'bus',\n  'car',\n  'crane',\n  'helicopter',\n  'motorcycle',\n  'offroad',\n  'person',\n  'pickup',\n  'plane',\n  'ship',\n  'tractor',\n  'train',\n  'tram',\n  'trolleybus',\n  'truck',\n  'van',\n  'scooter',\n];\n","export const loadImage = (url) => {\n  return new Promise(imageLoaded => {\n    const image = new Image();\n    image.onload = () => imageLoaded(image);\n    image.src = url;\n  });\n};\n\nexport const loadIcon = async (key, background, url) => {\n  const image = await loadImage(url);\n  const pixelRatio = window.devicePixelRatio;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = background.width * pixelRatio;\n  canvas.height = background.height * pixelRatio;\n  canvas.style.width = `${background.width}px`;\n  canvas.style.height = `${background.height}px`;\n\n  const context = canvas.getContext('2d');\n  context.drawImage(background, 0, 0, canvas.width, canvas.height);\n\n  const iconRatio = 0.5;\n  const imageWidth = canvas.width * iconRatio;\n  const imageHeight = canvas.height * iconRatio;\n  context.drawImage(image, (canvas.width - imageWidth) / 2, (canvas.height - imageHeight) / 2, imageWidth, imageHeight);\n\n  return context.getImageData(0, 0, canvas.width, canvas.height);\n};\n\nexport const reverseCoordinates = it => {\n  if (!it) {\n    return it;\n  } else if (Array.isArray(it)) {\n    if (it.length === 2 && !Number.isNaN(it[0]) && !Number.isNaN(it[1])) {\n      return [it[1], it[0]];\n    } else {\n      return it.map(it => reverseCoordinates(it));\n    }\n  } else {\n    return {\n      ...it,\n      coordinates: reverseCoordinates(it.coordinates),\n    }\n  }\n}\n","export const styleCustom = (url, attribution) => ({\n  version: 8,\n  sources: {\n    osm: {\n      type: 'raster',\n      tiles: [url],\n      attribution: attribution,\n    },\n  },\n  glyphs: 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\n  layers: [{\n    id: 'osm',\n    type: 'raster',\n    source: 'osm',\n  }],\n});\n\nexport const styleOsm = () => styleCustom(\n  'https://tile.openstreetmap.org/{z}/{x}/{y}.png',\n  ' <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n);\n\nexport const styleCarto = () => ({\n  'version': 8,\n  'sources': {\n    'raster-tiles': {\n      'type': 'raster',\n      'tiles': [\n          'https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png',\n          'https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}@2x.png'\n      ],\n      'tileSize': 256,\n      'attribution': ' <a target=\"_top\" rel=\"noopener\" href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors,  <a target=\"_top\" rel=\"noopener\" href=\"https://carto.com/attribution\">CARTO</a>'\n    }\n  },\n  'glyphs': 'https://cdn.traccar.com/map/fonts/{fontstack}/{range}.pbf',\n  'layers': [\n    {\n      'id': 'simple-tiles',\n      'type': 'raster',\n      'source': 'raster-tiles',\n      'minzoom': 0,\n      'maxzoom': 22,\n    }\n  ]\n});\n\nexport const styleMapbox = (style) => `mapbox://styles/mapbox/${style}`;\n\nexport const styleMapTiler = (style, key) => `https://api.maptiler.com/maps/${style}/style.json?key=${key}`;\n","import 'mapbox-gl/dist/mapbox-gl.css';\nimport './switcher/switcher.css';\nimport mapboxgl from 'mapbox-gl';\nimport { SwitcherControl } from './switcher/switcher';\nimport React, { useRef, useLayoutEffect, useEffect, useState } from 'react';\nimport { deviceCategories } from '../common/deviceCategories';\nimport { loadIcon, loadImage } from './mapUtil';\nimport { styleCarto, styleMapbox, styleOsm } from './mapStyles';\nimport t from '../common/localization';\nimport { useAttributePreference } from '../common/preferences';\n\nconst element = document.createElement('div');\nelement.style.width = '100%';\nelement.style.height = '100%';\n\nexport const map = new mapboxgl.Map({\n  container: element,\n  style: styleOsm(),\n});\n\nlet ready = false;\nconst readyListeners = new Set();\n\nconst addReadyListener = listener => {\n  readyListeners.add(listener);\n  listener(ready);\n};\n\nconst removeReadyListener = listener => {\n  readyListeners.delete(listener);\n};\n\nconst updateReadyValue = value => {\n  ready = value;\n  readyListeners.forEach(listener => listener(value));\n};\n\nconst initMap = async () => {\n  const background = await loadImage('images/background.svg');\n  await Promise.all(deviceCategories.map(async category => {\n    if (!map.hasImage(category)) {\n      const imageData = await loadIcon(category, background, `images/icon/${category}.svg`);\n      map.addImage(category, imageData, { pixelRatio: window.devicePixelRatio });\n    }\n  }));\n  updateReadyValue(true);\n};\n\nmap.on('load', initMap);\n\nmap.addControl(new mapboxgl.NavigationControl({\n  showCompass: false,\n}));\n\nmap.addControl(new SwitcherControl(\n  [\n    { title: t('mapOsm'), uri: styleOsm() },\n    { title: t('mapCarto'), uri: styleCarto() },\n    { title: t('mapMapboxStreets'), uri: styleMapbox('streets-v11') },\n    { title: t('mapMapboxOutdoors'), uri: styleMapbox('outdoors-v11') },\n    { title: t('mapMapboxSatellite'), uri: styleMapbox('satellite-v9') },\n  ],\n  t('mapOsm'),\n  () => updateReadyValue(false),\n  () => {\n    const waiting = () => {\n      if (!map.loaded()) {\n        setTimeout(waiting, 100);\n      } else {\n        initMap();\n      }\n    };\n    waiting();\n  },\n));\n\nconst Map = ({ children }) => {\n  const containerEl = useRef(null);\n\n  const [mapReady, setMapReady] = useState(false);\n\n  const mapboxAccessToken = useAttributePreference('mapboxAccessToken');\n\n  useEffect(() => {\n    mapboxgl.accessToken = mapboxAccessToken;\n  }, [mapboxAccessToken]);\n\n  useEffect(() => {\n    const listener = ready => setMapReady(ready);\n    addReadyListener(listener);\n    return () => {\n      removeReadyListener(listener);\n    };\n  }, []);\n\n  useLayoutEffect(() => {\n    const currentEl = containerEl.current;\n    currentEl.appendChild(element);\n    if (map) {\n      map.resize();\n    }\n    return () => {\n      currentEl.removeChild(element);\n    };\n  }, [containerEl]);\n\n  return (\n    <div style={{ width: '100%', height: '100%' }} ref={containerEl}>\n      {mapReady && children}\n    </div>\n  );\n};\n\nexport default Map;\n","import { useSelector } from 'react-redux';\n\nexport const usePreference = (key, defaultValue) => {\n  return useSelector(state => {\n    if (state.session.server.forceSettings) {\n      return state.session.server[key] || state.session.user[key] || defaultValue;\n    } else {\n      return state.session.user[key] || state.session.server[key] || defaultValue;\n    }\n  });\n};\n\nexport const useAttributePreference = (key, defaultValue) => {\n  return useSelector(state => {\n    if (state.session.server.forceSettings) {\n      return state.session.server.attributes[key] || state.session.user.attributes[key] || defaultValue;\n    } else {\n      return state.session.user.attributes[key] || state.session.server.attributes[key] || defaultValue;\n    }\n  });\n};\n","import { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { map } from './Map';\n\nconst SelectedDeviceMap = () => {\n  const mapCenter = useSelector(state => {\n    if (state.devices.selectedId) {\n      const position = state.positions.items[state.devices.selectedId] || null;\n      if (position) {\n        return [position.longitude, position.latitude];\n      }\n    }\n    return null;\n  });\n\n  useEffect(() => {\n    map.easeTo({ center: mapCenter });\n  }, [mapCenter]);\n\n  return null;\n}\n\nexport default SelectedDeviceMap;\n","import { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport circle from '@turf/circle';\n\nimport { map } from './Map';\n\nconst AccuracyMap = () => {\n  const id = 'accuracy';\n\n  const positions = useSelector(state => ({\n    type: 'FeatureCollection',\n    features: Object.values(state.positions.items).filter(position => position.accuracy > 0).map(position =>\n      circle([position.longitude, position.latitude], position.accuracy * 0.001)\n    ),\n  }));\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: []\n      }\n    });\n    map.addLayer({\n      'source': id,\n      'id': id,\n      'type': 'fill',\n      'filter': [\n         'all',\n         ['==', '$type', 'Polygon'],\n      ],\n      'paint': {\n         'fill-color':'#3bb2d0',\n         'fill-outline-color':'#3bb2d0',\n         'fill-opacity':0.25,\n      },\n    });\n\n    return () => {\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    map.getSource(id).setData(positions);\n  }, [positions]);\n\n  return null;\n}\n\nexport default AccuracyMap;\n","import wellknown from 'wellknown';\nimport { useEffect, useState } from 'react';\n\nimport { map } from './Map';\nimport { useEffectAsync } from '../reactHelper';\nimport { reverseCoordinates } from './mapUtil';\n\nconst GeofenceMap = () => {\n  const id = 'geofences';\n\n  const [geofences, setGeofences] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/geofences');\n    if (response.ok) {\n      setGeofences(await response.json());\n    }\n  }, []);\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: []\n      }\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-fill',\n      'type': 'fill',\n      'filter': [\n         'all',\n         ['==', '$type', 'Polygon'],\n      ],\n      'paint': {\n         'fill-color':'#3bb2d0',\n         'fill-outline-color':'#3bb2d0',\n         'fill-opacity':0.1,\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-line',\n      'type': 'line',\n      'paint': {\n         'line-color': '#3bb2d0',\n         'line-width': 2,\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': 'geofences-title',\n      'type': 'symbol',\n      'layout': {\n        'text-field': '{name}',\n        'text-font': ['Roboto Regular'],\n        'text-size': 12,\n      },\n      'paint': {\n        'text-halo-color': 'white',\n        'text-halo-width': 1,\n      },\n    });\n\n    return () => {\n      map.removeLayer('geofences-fill');\n      map.removeLayer('geofences-line');\n      map.removeLayer('geofences-title');\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    map.getSource(id).setData({\n      type: 'FeatureCollection',\n      features: geofences.map(item => [item.name, reverseCoordinates(wellknown(item.area))]).filter(([, geometry]) => !!geometry).map(([name, geometry]) => ({\n        type: 'Feature',\n        geometry: geometry,\n        properties: { name },\n      })),\n    });\n  }, [geofences]);\n\n  return null;\n}\n\nexport default GeofenceMap;\n","import moment from 'moment';\nimport t from '../common/localization';\n\nexport const formatPosition = (value, key) => {\n  if (value != null && typeof value === 'object') {\n    value = value[key];\n  }\n  switch (key) {\n    case 'fixTime':\n    case 'deviceTime':\n    case 'serverTime':\n      return moment(value).format('LLL');\n    case 'latitude':\n    case 'longitude':\n      return value.toFixed(5);\n    case 'speed':\n    case 'course':\n      return value.toFixed(1);\n    case 'batteryLevel':\n      return value + '%';\n    default:\n      if (typeof value === 'number') {\n        return formatNumber(value);\n      } else if (typeof value === 'boolean') {\n        return formatBoolean(value);\n      } else {\n        return value;\n      }\n  }\n}\n\nexport const formatBoolean = (value) => {\n  return value ? t('sharedYes') : t('sharedNo');\n}\n\nexport const formatNumber = (value, precision = 1) => {\n  return Number(value.toFixed(precision));\n}\n","import t from '../common/localization'\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { formatPosition } from '../common/formatter';\n\nconst StatusView = ({ deviceId, onShowDetails }) => {\n  const device = useSelector(state => state.devices.items[deviceId]);\n  const position = useSelector(state => state.positions.items[deviceId]);\n\n  const handleClick = e => {\n    e.preventDefault();\n    onShowDetails(position.id);\n  };\n\n  return (\n    <>\n      <b>{t('deviceStatus')}:</b> {formatPosition(device.status, 'status')}<br />\n      <b>{t('sharedLocation')}:</b> {formatPosition(position, 'latitude')} {formatPosition(position, 'longitude')}<br />\n      <b>{t('positionSpeed')}:</b> {formatPosition(position.speed, 'speed')}<br />\n      <b>{t('positionCourse')}:</b> {formatPosition(position.course, 'course')}<br />\n      <b>{t('positionDistance')}:</b> {formatPosition(position.attributes.totalDistance, 'distance')}<br />\n      {position.attributes.batteryLevel &&\n        <><b>{t('positionBattery')}:</b> {formatPosition(position.attributes.batteryLevel, 'batteryLevel')}<br /></>\n      }\n      <a href=\"/\" onClick={handleClick}>{t('sharedShowDetails')}</a>\n    </>\n  );\n};\n\nexport default StatusView;\n","import React, { useCallback, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport { Provider, useSelector } from 'react-redux';\n\nimport { map } from './Map';\nimport store from '../store';\nimport { useHistory } from 'react-router-dom';\nimport StatusView from './StatusView';\n\nconst PositionsMap = ({ positions }) => {\n  const id = 'positions';\n\n  const history = useHistory();\n  const devices = useSelector(state => state.devices.items);\n\n  const createFeature = (devices, position) => {\n    const device = devices[position.deviceId] || null;\n    return {\n      deviceId: position.deviceId,\n      name: device ? device.name : '',\n      category: device && (device.category || 'default'),\n    }\n  };\n\n  const onMouseEnter = () => map.getCanvas().style.cursor = 'pointer';\n  const onMouseLeave = () => map.getCanvas().style.cursor = '';\n\n  const onClickCallback = useCallback(event => {\n    const feature = event.features[0];\n    let coordinates = feature.geometry.coordinates.slice();\n    while (Math.abs(event.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += event.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n\n    const placeholder = document.createElement('div');\n    ReactDOM.render(\n      <Provider store={store}>\n        <StatusView deviceId={feature.properties.deviceId} onShowDetails={positionId => history.push(`/position/${positionId}`)} />\n      </Provider>,\n      placeholder\n    );\n\n    new mapboxgl.Popup({\n      offset: 25,\n      anchor: 'top'\n    })\n      .setDOMContent(placeholder)\n      .setLngLat(coordinates)\n      .addTo(map);\n  }, [history]);\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'FeatureCollection',\n        features: [],\n      }\n    });\n    map.addLayer({\n      'id': id,\n      'type': 'symbol',\n      'source': id,\n      'layout': {\n        'icon-image': '{category}',\n        'icon-allow-overlap': true,\n        'text-field': '{name}',\n        'text-allow-overlap': true,\n        'text-anchor': 'bottom',\n        'text-offset': [0, -2],\n        'text-font': ['Roboto Regular'],\n        'text-size': 12,\n      },\n      'paint': {\n        'text-halo-color': 'white',\n        'text-halo-width': 1,\n      },\n    });\n\n    map.on('mouseenter', id, onMouseEnter);\n    map.on('mouseleave', id, onMouseLeave);\n    map.on('click', id, onClickCallback);\n\n    return () => {\n      Array.from(map.getContainer().getElementsByClassName('mapboxgl-popup')).forEach(el => el.remove());\n\n      map.off('mouseenter', id, onMouseEnter);\n      map.off('mouseleave', id, onMouseLeave);\n      map.off('click', id, onClickCallback);\n\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, [onClickCallback]);\n\n  useEffect(() => {\n    map.getSource(id).setData({\n      type: 'FeatureCollection',\n      features: positions.map(position => ({\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [position.longitude, position.latitude],\n        },\n        properties: createFeature(devices, position),\n      }))\n    });\n  }, [devices, positions]);\n\n  return null;\n}\n\nexport default PositionsMap;\n","import React, {  } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport PositionsMap from './PositionsMap';\n\nconst CurrentPositionsMap = () => {\n  const positions = useSelector(state => Object.values(state.positions.items));\n  return (<PositionsMap positions={positions} />);\n}\n\nexport default CurrentPositionsMap;\n","import mapboxgl from 'mapbox-gl';\nimport { useEffect } from 'react';\nimport { map } from './Map';\n\nconst CurrentLocationMap = () => {\n  useEffect(() => {\n    const control = new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true,\n        timeout: 5000,\n      },\n      trackUserLocation: true,\n    });\n    map.addControl(control);\n    return () => map.removeControl(control);\n  }, []);\n\n  return null;\n}\n\nexport default CurrentLocationMap;\n","import React from 'react';\nimport { isWidthUp, makeStyles, withWidth } from '@material-ui/core';\nimport Drawer from '@material-ui/core/Drawer';\nimport ContainerDimensions from 'react-container-dimensions';\nimport DevicesList from './DevicesList';\nimport MainToolbar from './MainToolbar';\nimport Map from './map/Map';\nimport SelectedDeviceMap from './map/SelectedDeviceMap';\nimport AccuracyMap from './map/AccuracyMap';\nimport GeofenceMap from './map/GeofenceMap';\nimport CurrentPositionsMap from './map/CurrentPositionsMap';\nimport CurrentLocationMap from './map/CurrentLocationMap';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flexGrow: 1,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'row',\n    [theme.breakpoints.down('xs')]: {\n      flexDirection: 'column-reverse',\n    }\n  },\n  drawerPaper: {\n    position: 'relative',\n    [theme.breakpoints.up('sm')]: {\n      width: 350,\n    },\n    [theme.breakpoints.down('xs')]: {\n      height: 250,\n    }\n  },\n  mapContainer: {\n    flexGrow: 1,\n  },\n}));\n\nconst MainPage = ({ width }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <div className={classes.content}>\n        <Drawer\n          anchor={isWidthUp('sm', width) ? 'left' : 'bottom'}\n          variant='permanent'\n          classes={{ paper: classes.drawerPaper }}>\n          <DevicesList />\n        </Drawer>\n        <div className={classes.mapContainer}>\n          <ContainerDimensions>\n            <Map>\n              <CurrentLocationMap />\n              <GeofenceMap />\n              <AccuracyMap />\n              <CurrentPositionsMap />\n              <SelectedDeviceMap />\n            </Map>\n          </ContainerDimensions>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default withWidth()(MainPage);\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { sessionActions } from './store';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 'auto',\n    marginLeft: theme.spacing(3),\n    marginRight: theme.spacing(3),\n    [theme.breakpoints.up(400 + theme.spacing(3 * 2))]: {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: theme.spacing(3),\n  },\n  logo: {\n    marginTop: theme.spacing(2)\n  },\n  buttons: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '40%',\n    },\n  },\n}));\n\nconst LoginPage = () => {\n  const dispatch = useDispatch();\n\n  const [failed, setFailed] = useState(false);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleEmailChange = (event) => {\n    setEmail(event.target.value);\n  }\n\n  const handlePasswordChange = (event) => {\n    setPassword(event.target.value);\n  }\n\n  const handleRegister = () => {\n    // TODO: Implement registration\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n    const response = await fetch('/api/session', { method: 'POST', body: new URLSearchParams(`email=${email}&password=${password}`) });\n    if (response.ok) {\n      const user = await response.json();\n      dispatch(sessionActions.updateUser(user));\n      history.push('/');\n    } else {\n      setFailed(true);\n      setPassword('');\n    }\n  }\n\n  return (\n    <main className={classes.root}>\n      <Paper className={classes.paper}>\n        <img className={classes.logo} src='/logo.svg' alt='Traccar' />\n        <form onSubmit={handleLogin}>\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userEmail')}\n            name='email'\n            value={email}\n            autoComplete='email'\n            autoFocus\n            onChange={handleEmailChange}\n            helperText={failed && 'Invalid username or password'} />\n\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            error={failed}\n            label={t('userPassword')}\n            name='password'\n            value={password}\n            type='password'\n            autoComplete='current-password'\n            onChange={handlePasswordChange} />\n\n          <FormControl fullWidth margin='normal'>\n            <div className={classes.buttons}>\n              <Button type='button' variant='contained' disabled onClick={handleRegister}>\n                {t('loginRegister')}\n              </Button>\n              <Button type='submit' variant='contained' color='primary' disabled={!email || !password}>\n                {t('loginLogin')}\n              </Button>\n            </div>\n          </FormControl>\n        </form>\n      </Paper>\n    </main>\n  );\n}\n\nexport default LoginPage;\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { Grid, TableContainer, Table, TableRow, TableCell, TableHead, TableBody, Paper, makeStyles, FormControl, InputLabel, Select, MenuItem, Button, TextField } from '@material-ui/core';\nimport t from '../common/localization';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { formatPosition } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    padding: theme.spacing(2),\n  },\n  form: {\n    padding: theme.spacing(1, 2, 2),\n  },\n}));\n\nconst RouteReportPage = () => {\n  const classes = useStyles();\n  const devices = useSelector(state => Object.values(state.devices.items));\n  const [deviceId, setDeviceId] = useState();\n  const [period, setPeriod] = useState('today');\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\n  const [to, setTo] = useState(moment());\n  const [data, setData] = useState([]);\n\n  const handleShow = () => {\n    let selectedFrom;\n    let selectedTo;\n    switch (period) {\n      case 'today':\n        selectedFrom = moment().startOf('day');\n        selectedTo = moment().endOf('day');\n        break;\n      case 'yesterday':\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\n        selectedTo = moment().subtract(1, 'day').endOf('day');\n        break;\n      case 'thisWeek':\n        selectedFrom = moment().startOf('week');\n        selectedTo = moment().endOf('week');\n        break;\n      case 'previousWeek':\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\n        selectedTo = moment().subtract(1, 'week').endOf('week');\n        break;\n      case 'thisMonth':\n        selectedFrom = moment().startOf('month');\n        selectedTo = moment().endOf('month');\n        break;\n      case 'previousMonth':\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\n        selectedTo = moment().subtract(1, 'month').endOf('month');\n        break;\n      default:\n        selectedFrom = from;\n        selectedTo = to;\n        break;\n    }\n    const query = new URLSearchParams({\n      deviceId,\n      from: selectedFrom.toISOString(),\n      to: selectedTo.toISOString(),\n    });\n    fetch(`/api/reports/route?${query.toString()}`, { headers: { 'Accept': 'application/json' } })\n      .then(response => {\n        if (response.ok) {\n          response.json().then(setData);\n        }\n      });\n  }\n\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <div className={classes.content}>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={3} lg={2}>\n            <Paper className={classes.form}>\n              <FormControl variant='filled' margin='normal' fullWidth>\n                <InputLabel>{t('reportDevice')}</InputLabel>\n                <Select value={deviceId} onChange={e => setDeviceId(e.target.value)}>\n                  {devices.map((device) => (\n                    <MenuItem value={device.id}>{device.name}</MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl variant='filled' margin='normal' fullWidth>\n                <InputLabel>{t('reportPeriod')}</InputLabel>\n                <Select value={period} onChange={e => setPeriod(e.target.value)}>\n                  <MenuItem value='today'>{t('reportToday')}</MenuItem>\n                  <MenuItem value='yesterday'>{t('reportYesterday')}</MenuItem>\n                  <MenuItem value='thisWeek'>{t('reportThisWeek')}</MenuItem>\n                  <MenuItem value='previousWeek'>{t('reportPreviousWeek')}</MenuItem>\n                  <MenuItem value='thisMonth'>{t('reportThisMonth')}</MenuItem>\n                  <MenuItem value='previousMonth'>{t('reportPreviousMonth')}</MenuItem>\n                  <MenuItem value='custom'>{t('reportCustom')}</MenuItem>\n                </Select>\n              </FormControl>\n              {period === 'custom' &&\n                <TextField\n                  margin='normal'\n                  variant='filled'\n                  label={t('reportFrom')}\n                  type='datetime-local'\n                  value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n                  onChange={e => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n                  fullWidth />\n              }\n              {period === 'custom' &&\n                <TextField\n                  margin='normal'\n                  variant='filled'\n                  label={t('reportTo')}\n                  type='datetime-local'\n                  value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n                  onChange={(e) => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n                  fullWidth />\n              }\n              <FormControl margin='normal' fullWidth>\n                <Button type='button' color='primary' variant='contained' disabled={!deviceId} onClick={handleShow}>\n                  {t('reportShow')}\n                </Button>\n              </FormControl>\n            </Paper>\n          </Grid>\n          <Grid item xs={12} md={9} lg={10}>\n            <TableContainer component={Paper}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>{t('positionFixTime')}</TableCell>\n                    <TableCell>{t('positionLatitude')}</TableCell>\n                    <TableCell>{t('positionLongitude')}</TableCell>\n                    <TableCell>{t('positionSpeed')}</TableCell>\n                    <TableCell>{t('positionAddress')}</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {data.map((item) => (\n                    <TableRow key={item.id}>\n                      <TableCell>{formatPosition(item, 'fixTime')}</TableCell>\n                      <TableCell>{formatPosition(item, 'latitude')}</TableCell>\n                      <TableCell>{formatPosition(item, 'longitude')}</TableCell>\n                      <TableCell>{formatPosition(item, 'speed')}</TableCell>\n                      <TableCell>{formatPosition(item, 'address')}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Grid>\n        </Grid>\n      </div>\n    </div>\n  );\n}\n\nexport default RouteReportPage;\n","import React, { useState } from 'react';\nimport { Button, Dialog, DialogActions, DialogContent, FormControl, InputLabel, MenuItem, Select, TextField } from \"@material-ui/core\";\n\nimport t from '../common/localization';\nimport { Autocomplete, createFilterOptions } from '@material-ui/lab';\n\nconst AddAttributeDialog = ({ open, onResult, definitions }) => {\n  const filter = createFilterOptions({\n    stringify: option => option.name,\n  });\n\n  const options = Object.entries(definitions).map(([key, value]) => ({\n    key,\n    name: value.name,\n    type: value.type,\n  }));\n\n  const [key, setKey] = useState();\n  const [type, setType] = useState('string');\n\n  return (\n    <Dialog open={open} fullWidth maxWidth=\"xs\">\n      <DialogContent>\n        <Autocomplete\n          onChange={(_, option) => {\n            setKey(option && typeof option === 'object' ? option.key : option);\n            if (option && option.type) {\n              setType(option.type);\n            }\n          }}\n          filterOptions={(options, params) => {\n            const filtered = filter(options, params);\n            if (params.inputValue) {\n              filtered.push({\n                key: params.inputValue,\n                name: params.inputValue,\n              });\n            }\n            return filtered;\n          }}\n          options={options}\n          getOptionLabel={option => {\n            return option && typeof option === 'object' ? option.name : option;\n          }}\n          renderOption={option => option.name}\n          freeSolo\n          renderInput={(params) => (\n            <TextField {...params} label={t('sharedAttribute')} variant=\"filled\" margin=\"normal\" />\n          )}\n        />\n        <FormControl\n          variant=\"filled\"\n          margin=\"normal\"\n          fullWidth\n          disabled={key in definitions}>\n          <InputLabel>{t('sharedType')}</InputLabel>\n          <Select\n            value={type}\n            onChange={e => setType(e.target.value)}>\n            <MenuItem value={'string'}>{t('sharedTypeString')}</MenuItem>\n            <MenuItem value={'number'}>{t('sharedTypeNumber')}</MenuItem>\n            <MenuItem value={'boolean'}>{t('sharedTypeBoolean')}</MenuItem>\n          </Select>\n        </FormControl>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          color=\"primary\"\n          disabled={!key}\n          onClick={() => onResult({ key, type })}>\n          {t('sharedAdd')}\n        </Button>\n        <Button\n          autoFocus\n          onClick={() => onResult(null)}>\n          {t('sharedCancel')}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default AddAttributeDialog;\n","import React, { useState } from 'react';\n\nimport t from '../common/localization';\n\nimport { Button, Checkbox, FilledInput, FormControl, FormControlLabel, Grid, IconButton, InputAdornment, InputLabel, makeStyles } from \"@material-ui/core\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport AddIcon from '@material-ui/icons/Add';\nimport AddAttributeDialog from './AddAttributeDialog';\n\nconst useStyles = makeStyles(theme => ({\n  addButton: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(1),\n  },\n  removeButton: {\n    marginRight: theme.spacing(1.5),\n  },\n}));\n\nconst EditAttributesView = ({ attributes, setAttributes, definitions }) => {\n  const classes = useStyles();\n\n  const [addDialogShown, setAddDialogShown] = useState(false);\n\n  const convertToList = (attributes) => {\n    let booleanList = [];\n    let otherList = [];\n    for (const key in attributes) {\n      const value = attributes[key];\n      const type = getAttributeType(value);\n      if (type === 'boolean') {\n        booleanList.push({ key, value, type });\n      } else {\n        otherList.push({ key, value, type });\n      }\n    }\n    return otherList.concat(booleanList);\n  }\n\n  const handleAddResult = (definition) => {\n    setAddDialogShown(false);\n    if (definition) {\n      switch(definition.type) {\n        case 'number':\n          updateAttribute(definition.key, 0);\n          break;\n        case 'boolean':\n          updateAttribute(definition.key, false);\n          break;\n        default:\n          updateAttribute(definition.key, \"\");\n          break;\n      }\n    }\n  }\n\n  const updateAttribute = (key, value) => {\n    let updatedAttributes = {...attributes};\n    updatedAttributes[key] = value;\n    setAttributes(updatedAttributes);\n  };\n\n  const deleteAttribute = (key) => {\n    let updatedAttributes = {...attributes};\n    delete updatedAttributes[key];\n    setAttributes(updatedAttributes);\n  };\n\n  const getAttributeName = (key) => {\n    const definition = definitions[key];\n    return definition ? definition.name : key;\n  };\n\n  const getAttributeType = (value) => {\n    if (typeof value === 'number') {\n      return 'number';\n    } else if (typeof value === 'boolean') {\n      return 'boolean';\n    } else {\n      return 'string';\n    }\n  };\n\n  return (\n    <>\n      {convertToList(attributes).map(({ key, value, type }) => {\n        if (type === 'boolean') {\n          return (\n            <Grid container direction=\"row\" justify=\"space-between\">\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={value}\n                    onChange={e => updateAttribute(key, e.target.checked)}\n                    />\n                }\n                label={getAttributeName(key)} />\n              <IconButton className={classes.removeButton} onClick={() => deleteAttribute(key)}>\n                <CloseIcon />\n              </IconButton>\n            </Grid>\n          );\n        } else {\n          return (\n            <FormControl variant=\"filled\" margin=\"normal\" key={key}>\n              <InputLabel>{getAttributeName(key)}</InputLabel>\n              <FilledInput\n                type={type === 'number' ? 'number' : 'text'}\n                defaultValue={value}\n                onChange={e => updateAttribute(key, e.target.value)}\n                endAdornment={\n                  <InputAdornment position=\"end\">\n                    <IconButton onClick={() => deleteAttribute(key)}>\n                      <CloseIcon />\n                    </IconButton>\n                  </InputAdornment>\n                }\n                />\n            </FormControl>\n          );\n        }\n      })}\n      <Button\n        size=\"large\"\n        variant=\"outlined\"\n        color=\"primary\"\n        onClick={() => setAddDialogShown(true)}\n        startIcon={<AddIcon />}\n        className={classes.addButton}>\n        {t('sharedAdd')}\n      </Button>\n      <AddAttributeDialog\n        open={addDialogShown}\n        onResult={handleAddResult}\n        definitions={definitions}\n        />\n    </>\n  );\n}\n\nexport default EditAttributesView;\n","import t from '../common/localization'\n\nexport default {\n  'speedLimit': {\n    name: t('attributeSpeedLimit'),\n    type: 'string',\n  },\n  'report.ignoreOdometer': {\n    name: t('attributeReportIgnoreOdometer'),\n    type: 'boolean',\n  },\n};\n","import t from '../common/localization'\n\nexport default {\n  'notificationTokens': {\n    name: t('attributeNotificationTokens'),\n    type: 'string',\n  },\n  'web.liveRouteLength': {\n    name: t('attributeWebLiveRouteLength'),\n    type: 'number',\n  },\n  'web.selectZoom': {\n    name: t('attributeWebSelectZoom'),\n    type: 'number',\n  },\n  'web.maxZoom': {\n    name: t('attributeWebMaxZoom'),\n    type: 'number',\n  },\n  'ui.disableReport': {\n    name: t('attributeUiDisableReport'),\n    type: 'boolean',\n  },\n  'ui.disableEvents': {\n    name: t('attributeUiDisableEvents'),\n    type: 'boolean',\n  },\n  'ui.disableVehicleFetures': {\n    name: t('attributeUiDisableVehicleFetures'),\n    type: 'boolean',\n  },\n  'ui.disableDrivers': {\n    name: t('attributeUiDisableDrivers'),\n    type: 'boolean',\n  },\n  'ui.disableComputedAttributes': {\n    name: t('attributeUiDisableComputedAttributes'),\n    type: 'boolean',\n  },\n  'ui.disableCalendars': {\n    name: t('attributeUiDisableCalendars'),\n    type: 'boolean',\n  },\n  'ui.disableMaintenance': {\n    name: t('attributeUiDisableMaintenance'),\n    type: 'boolean',\n  },\n  'ui.hidePositionAttributes': {\n    name: t('attributeUiHidePositionAttributes'),\n    type: 'string',\n  },\n  'distanceUnit': {\n    name: t('settingsDistanceUnit'),\n    type: 'string',\n  },\n  'speedUnit': {\n    name: t('settingsSpeedUnit'),\n    type: 'string',\n  },\n  'volumeUnit': {\n    name: t('settingsVolumeUnit'),\n    type: 'string',\n  },\n  'timezone': {\n    name: t('sharedTimezone'),\n    type: 'string',\n  },\n};\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from '../common/localization';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, Button, FormControl, Container, Checkbox, FormControlLabel } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport MainToolbar from '../MainToolbar';\nimport { sessionActions } from '../store';\nimport EditAttributesView from '../attributes/EditAttributesView';\nimport deviceAttributes from '../attributes/deviceAttributes';\nimport userAttributes from '../attributes/userAttributes';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(2),\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '33%',\n    },\n  },\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst ServerPage = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const item = useSelector(state => state.session.server);\n  const setItem = (updatedItem) => dispatch(sessionActions.updateServer(updatedItem));\n\n  const handleSave = async () => {\n    const response = await fetch('/api/server', {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(item),\n    });\n\n    if (response.ok) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='xs' className={classes.container}>\n        {item &&\n          <>\n            <Accordion defaultExpanded>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedPreferences')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <TextField\n                  margin=\"normal\"\n                  defaultValue={item.announcement}\n                  onChange={event => setItem({...item, announcement: event.target.value})}\n                  label={t('serverAnnouncement')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedPermissions')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <FormControlLabel\n                  control={<Checkbox checked={item.registration} onChange={event => setItem({...item, registration: event.target.checked})} />}\n                  label={t('serverRegistration')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.readonly} onChange={event => setItem({...item, readonly: event.target.checked})} />}\n                  label={t('serverReadonly')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.deviceReadonly} onChange={event => setItem({...item, deviceReadonly: event.target.checked})} />}\n                  label={t('userDeviceReadonly')} />\n                <FormControlLabel\n                  control={<Checkbox checked={item.limitCommands} onChange={event => setItem({...item, limitCommands: event.target.checked})} />}\n                  label={t('userLimitCommands')} />\n              </AccordionDetails>\n            </Accordion>\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedAttributes')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <EditAttributesView\n                  attributes={item.attributes}\n                  setAttributes={attributes => setItem({...item, attributes})}\n                  definitions={{...userAttributes, ...deviceAttributes}}\n                  />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        }\n        <FormControl fullWidth margin='normal'>\n          <div className={classes.buttons}>\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\n              {t('sharedCancel')}\n            </Button>\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\n              {t('sharedSave')}\n            </Button>\n          </div>\n        </FormControl>\n      </Container>\n    </>\n  );\n}\n\nexport default ServerPage;\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\nimport { formatBoolean } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst UsersView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/users');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('sharedName')}</TableCell>\n          <TableCell>{t('userEmail')}</TableCell>\n          <TableCell>{t('userAdmin')}</TableCell>\n          <TableCell>{t('sharedDisabled')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map((item) => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{item.name}</TableCell>\n            <TableCell>{item.email}</TableCell>\n            <TableCell>{formatBoolean(item, 'administrator')}</TableCell>\n            <TableCell>{formatBoolean(item, 'disabled')}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst UsersPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={UsersView} editPath=\"/user\" endpoint=\"users\" />\n    </>\n  );\n}\n\nexport default UsersPage;\n","import React from 'react';\nimport MainToolbar from './MainToolbar';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\n\nimport t from './common/localization';\nimport { useEffectAsync } from './reactHelper';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    marginTop: theme.spacing(2),\n  },\n  buttons: {\n    display: 'flex',\n    justifyContent: 'space-evenly',\n    '& > *': {\n      flexBasis: '33%',\n    },\n  },\n}));\n\nconst EditItemView = ({ children, endpoint, item, setItem }) => {\n  const history = useHistory();\n  const classes = useStyles();\n  const { id } = useParams();\n\n  useEffectAsync(async () => {\n    if (id) {\n      const response = await fetch(`/api/${endpoint}/${id}`);\n      if (response.ok) {\n        setItem(await response.json());\n      }\n    } else {\n      setItem({});\n    }\n  }, [id]);\n\n  const handleSave = async () => {\n    let url = `/api/${endpoint}`;\n    if (id) {\n      url += `/${id}`;\n    }\n\n    const response = await fetch(url, {\n      method: !id ? 'POST' : 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(item),\n    });\n\n    if (response.ok) {\n      history.goBack();\n    }\n  };\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='xs' className={classes.container}>\n        {children}\n        <FormControl fullWidth margin='normal'>\n          <div className={classes.buttons}>\n            <Button type='button' color='primary' variant='outlined' onClick={() => history.goBack()}>\n              {t('sharedCancel')}\n            </Button>\n            <Button type='button' color='primary' variant='contained' onClick={handleSave}>\n              {t('sharedSave')}\n            </Button>\n          </div>\n        </FormControl>\n      </Container>\n    </>\n  );\n}\n\nexport default EditItemView;\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useEffectAsync } from '../reactHelper';\n\nconst SelectField = ({\n  margin,\n  variant,\n  label,\n  multiple,\n  defaultValue,\n  onChange,\n  endpoint,\n  data,\n  keyGetter = item => item.id,\n  titleGetter = item => item.name,\n}) => {\n  const [items, setItems] = useState(data);\n\n  useEffectAsync(async () => {\n    if (endpoint) {\n      const response = await fetch(endpoint);\n      if (response.ok) {\n        setItems(await response.json());\n      }\n    }\n  }, []);\n\n  if (items) {\n    return (\n      <FormControl margin={margin} variant={variant}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple={multiple}\n          defaultValue={defaultValue}\n          onChange={onChange}>\n          {!multiple &&\n            <MenuItem value={0}>&nbsp;</MenuItem>\n          }\n          {items.map(item => (\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default SelectField;\n","import { FormControl, InputLabel, MenuItem, Select } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { useEffectAsync } from '../reactHelper';\n\nconst LinkField = ({\n  margin,\n  variant,\n  label,\n  endpointAll,\n  endpointLinked,\n  baseId,\n  keyBase,\n  keyLink,\n  keyGetter = item => item.id,\n  titleGetter = item => item.name,\n}) => {\n  const [items, setItems] = useState();\n  const [linked, setLinked] = useState();\n\n  useEffectAsync(async () => {\n    const response = await fetch(endpointAll);\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, []);\n\n  useEffectAsync(async () => {\n    const response = await fetch(endpointLinked);\n    if (response.ok) {\n      const data = await response.json();\n      setLinked(data.map(it => it.id));\n    }\n  }, []);\n\n  const createBody = linkId => {\n    const body = {};\n    body[keyBase] = baseId;\n    body[keyLink] = linkId;\n    return body;\n  }\n\n  const onChange = async event => {\n    const oldValue = linked;\n    const newValue = event.target.value;\n    for (const added of newValue.filter(it => !oldValue.includes(it))) {\n      await fetch('/api/permissions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(createBody(added)),\n      });\n    }\n    for (const removed of oldValue.filter(it => !newValue.includes(it))) {\n      await fetch('/api/permissions', {\n        method: 'DELETE',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(createBody(removed)),\n      });\n    }\n    setLinked(newValue);\n  };\n\n  if (items && linked) {\n    return (\n      <FormControl margin={margin} variant={variant}>\n        <InputLabel>{label}</InputLabel>\n        <Select\n          multiple\n          value={linked}\n          onChange={onChange}>\n          {items.map(item => (\n            <MenuItem key={keyGetter(item)} value={keyGetter(item)}>{titleGetter(item)}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    );\n  } else {\n    return null;\n  }\n}\n\nexport default LinkField;\n","export const prefixString = (prefix, value) => {\n  return prefix + value.charAt(0).toUpperCase() + value.slice(1);\n}\n\nexport const unprefixString = (prefix, value) => {\n  return value.charAt(prefix.length).toLowerCase() + value.slice(prefix.length + 1);\n}\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\nimport EditItemView from './EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from './attributes/EditAttributesView';\nimport deviceAttributes from './attributes/deviceAttributes';\nimport SelectField from './form/SelectField';\nimport { deviceCategories } from './common/deviceCategories';\nimport LinkField from './form/LinkField';\nimport { prefixString } from './common/stringUtils';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst DevicePage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"devices\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.uniqueId}\n                onChange={event => setItem({...item, uniqueId: event.target.value})}\n                label={t('deviceIdentifier')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedExtra')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.groupId}\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\n                endpoint=\"/api/groups\"\n                label={t('groupParent')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.phone}\n                onChange={event => setItem({...item, phone: event.target.value})}\n                label={t('sharedPhone')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.model}\n                onChange={event => setItem({...item, model: event.target.value})}\n                label={t('deviceModel')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.contact}\n                onChange={event => setItem({...item, contact: event.target.value})}\n                label={t('deviceContact')}\n                variant=\"filled\" />\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.category}\n                onChange={event => setItem({...item, category: event.target.value})}\n                data={deviceCategories.map(category => ({\n                  id: category,\n                  name: t(`category${category.replace(/^\\w/, c => c.toUpperCase())}`)\n                }))}\n                label={t('deviceCategory')}\n                variant=\"filled\" />\n              <FormControlLabel\n                control={<Checkbox checked={item.disabled} onChange={event => setItem({...item, disabled: event.target.checked})} />}\n                label={t('sharedDisabled')} />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={deviceAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n          {item.id &&\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedConnections')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/geofences\"\n                  endpointLinked={\"/api/geofences?deviceId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"deviceId\"\n                  keyLink=\"geofenceId\"\n                  label={t('sharedGeofences')}\n                  variant=\"filled\" />\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/notifications\"\n                  endpointLinked={\"/api/notifications?deviceId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"deviceId\"\n                  keyLink=\"notificationId\"\n                  titleGetter={it => t(prefixString('event', it.type))}\n                  label={t('sharedNotifications')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n          }\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default DevicePage;\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from './common/localization';\nimport userAttributes from './attributes/userAttributes';\nimport EditItemView from './EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from './attributes/EditAttributesView';\nimport LinkField from './form/LinkField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst UserPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"users\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.email}\n                onChange={event => setItem({...item, email: event.target.value})}\n                label={t('userEmail')}\n                variant=\"filled\" />\n              <TextField\n                margin=\"normal\"\n                type=\"password\"\n                onChange={event => setItem({...item, password: event.target.value})}\n                label={t('userPassword')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={userAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n          {item.id &&\n            <Accordion>\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography variant=\"subtitle1\">\n                  {t('sharedConnections')}\n                </Typography>\n              </AccordionSummary>\n              <AccordionDetails className={classes.details}>\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/devices?all=true\"\n                  endpointLinked={\"/api/devices?userId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"userId\"\n                  keyLink=\"deviceId\"\n                  label={t('deviceTitle')}\n                  variant=\"filled\" />\n                <LinkField\n                  margin=\"normal\"\n                  endpointAll=\"/api/groups?all=true\"\n                  endpointLinked={\"/api/groups?userId=\" + item.id}\n                  baseId={item.id}\n                  keyBase=\"userId\"\n                  keyLink=\"groupId\"\n                  label={t('settingsGroups')}\n                  variant=\"filled\" />\n              </AccordionDetails>\n            </Accordion>\n          }\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default UserPage;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { connect } from 'react-redux';\nimport { positionsActions, devicesActions, sessionActions } from './store';\nimport { useHistory } from 'react-router-dom';\nimport { useEffectAsync } from './reactHelper';\n\nconst displayNotifications = events => {\n  if (\"Notification\" in window) {\n    if (Notification.permission === \"granted\") {\n      for (const event of events) {\n        const notification = new Notification(`Event: ${event.type}`);\n        setTimeout(notification.close.bind(notification), 4 * 1000);\n      }\n    } else if (Notification.permission !== \"denied\") {\n      Notification.requestPermission(permission => {\n        if (permission === \"granted\") {\n          displayNotifications(events);\n        }\n      });\n    }\n  }\n};\n\nconst SocketController = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const authenticated = useSelector(state => !!state.session.user);\n\n  const connectSocket = () => {\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n    const socket = new WebSocket(protocol + '//' + window.location.host + '/api/socket');\n\n    socket.onclose = () => {\n      setTimeout(() => connectSocket(), 60 * 1000);\n    };\n\n    socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n      if (data.devices) {\n        dispatch(devicesActions.update(data.devices));\n      }\n      if (data.positions) {\n        dispatch(positionsActions.update(data.positions));\n      }\n      if (data.events) {\n        displayNotifications(data.events);\n      }\n    };\n  }\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/server');\n    if (response.ok) {\n      dispatch(sessionActions.updateServer(await response.json()));\n    }\n  }, []);\n\n  useEffectAsync(async () => {\n    if (authenticated) {\n      const response = await fetch('/api/devices');\n      if (response.ok) {\n        dispatch(devicesActions.refresh(await response.json()));\n      }\n      connectSocket();\n    } else {\n      const response = await fetch('/api/session');\n      if (response.ok) {\n        dispatch(sessionActions.updateUser(await response.json()));\n      } else {\n        history.push('/login');\n      }\n    }\n  }, [authenticated]);\n\n  return null;\n}\n\nexport default connect()(SocketController);\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\nimport { prefixString } from '../common/stringUtils';\nimport { formatBoolean } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst NotificationsView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/notifications');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  const formatList = (prefix, value) => {\n    if (value) {\n      return value\n        .split(/[, ]+/)\n        .filter(Boolean)\n        .map(it => t(prefixString(prefix, it)))\n        .join(', ');\n    }\n    return '';\n  };\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('notificationType')}</TableCell>\n          <TableCell>{t('notificationAlways')}</TableCell>\n          <TableCell>{t('sharedAlarms')}</TableCell>\n          <TableCell>{t('notificationNotificators')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map(item => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{t(prefixString('event', item.type))}</TableCell>\n            <TableCell>{formatBoolean(item.always)}</TableCell>\n            <TableCell>{formatList('alarm', item.attributes.alarms)}</TableCell>\n            <TableCell>{formatList('notificator', item.notificators)}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst NotificationsPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={NotificationsView} editPath=\"/settings/notification\" endpoint=\"notifications\" />\n    </>\n  );\n}\n\nexport default NotificationsPage;\n","import React, { useState } from 'react';\n\nimport t, { findStringKeys } from '../common/localization';\nimport EditItemView from '../EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography, FormControlLabel, Checkbox } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { prefixString, unprefixString } from '../common/stringUtils';\nimport SelectField from '../form/SelectField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst NotificationPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  const alarms = findStringKeys(it => it.startsWith('alarm')).map(it => ({\n    key: unprefixString('alarm', it),\n    name: t(it),\n  }));\n\n  return (\n    <EditItemView endpoint=\"notifications\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.type}\n                onChange={e => setItem({...item, type: e.target.value})}\n                endpoint=\"/api/notifications/types\"\n                keyGetter={it => it.type}\n                titleGetter={it => t(prefixString('event', it.type))}\n                label={t('sharedType')}\n                variant=\"filled\" />\n              <SelectField\n                multiple\n                margin=\"normal\"\n                defaultValue={item.notificators ? item.notificators.split(/[, ]+/) : []}\n                onChange={e => setItem({...item, notificators: e.target.value.join()})}\n                endpoint=\"/api/notifications/notificators\"\n                keyGetter={it => it.type}\n                titleGetter={it => t(prefixString('notificator', it.type))}\n                label={t('notificationNotificators')}\n                variant=\"filled\" />\n              {item.type === 'alarm' &&\n                <SelectField\n                  multiple\n                  margin=\"normal\"\n                  defaultValue={item.attributes && item.attributes.alarms ? item.attributes.alarms.split(/[, ]+/) : []}\n                  onChange={e => setItem({...item, attributes: {...item.attributes, alarms: e.target.value.join()}})}\n                  data={alarms}\n                  keyGetter={it => it.key}\n                  label={t('sharedAlarms')}\n                  variant=\"filled\" />\n              }\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={item.always}\n                    onChange={event => setItem({...item, always: event.target.checked})}\n                    />\n                }\n                label={t('notificationAlways')} />\n            </AccordionDetails>\n          </Accordion>\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default NotificationPage;\n","import React, { useState } from 'react';\nimport MainToolbar from '../MainToolbar';\nimport { TableContainer, Table, TableRow, TableCell, TableHead, TableBody, makeStyles, IconButton } from '@material-ui/core';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport t from '../common/localization';\nimport { useEffectAsync } from '../reactHelper';\nimport EditCollectionView from '../EditCollectionView';\n\nconst useStyles = makeStyles(theme => ({\n  columnAction: {\n    width: theme.spacing(1),\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nconst GroupsView = ({ updateTimestamp, onMenuClick }) => {\n  const classes = useStyles();\n\n  const [items, setItems] = useState([]);\n\n  useEffectAsync(async () => {\n    const response = await fetch('/api/groups');\n    if (response.ok) {\n      setItems(await response.json());\n    }\n  }, [updateTimestamp]);\n\n  return (\n    <TableContainer>\n    <Table>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.columnAction} />\n          <TableCell>{t('sharedName')}</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {items.map((item) => (\n          <TableRow key={item.id}>\n            <TableCell className={classes.columnAction} padding=\"none\">\n              <IconButton onClick={(event) => onMenuClick(event.currentTarget, item.id)}>\n                <MoreVertIcon />\n              </IconButton>\n            </TableCell>\n            <TableCell>{item.name}</TableCell>\n          </TableRow>\n        ))}\n      </TableBody>\n    </Table>\n    </TableContainer>\n  );\n}\n\nconst GroupsPage = () => {\n  return (\n    <>\n      <MainToolbar />\n      <EditCollectionView content={GroupsView} editPath=\"/settings/group\" endpoint=\"groups\" />\n    </>\n  );\n}\n\nexport default GroupsPage;\n","import React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\n\nimport t from '../common/localization';\nimport EditItemView from '../EditItemView';\nimport { Accordion, AccordionSummary, AccordionDetails, makeStyles, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport EditAttributesView from '../attributes/EditAttributesView';\nimport deviceAttributes from '../attributes/deviceAttributes';\nimport SelectField from '../form/SelectField';\n\nconst useStyles = makeStyles(() => ({\n  details: {\n    flexDirection: 'column',\n  },\n}));\n\nconst GroupPage = () => {\n  const classes = useStyles();\n\n  const [item, setItem] = useState();\n\n  return (\n    <EditItemView endpoint=\"groups\" item={item} setItem={setItem}>\n      {item &&\n        <>\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedRequired')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <TextField\n                margin=\"normal\"\n                defaultValue={item.name}\n                onChange={event => setItem({...item, name: event.target.value})}\n                label={t('sharedName')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedExtra')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <SelectField\n                margin=\"normal\"\n                defaultValue={item.groupId}\n                onChange={event => setItem({...item, groupId: Number(event.target.value)})}\n                endpoint=\"/api/groups\"\n                label={t('groupParent')}\n                variant=\"filled\" />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography variant=\"subtitle1\">\n                {t('sharedAttributes')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.details}>\n              <EditAttributesView\n                attributes={item.attributes}\n                setAttributes={attributes => setItem({...item, attributes})}\n                definitions={deviceAttributes}\n                />\n            </AccordionDetails>\n          </Accordion>\n        </>\n      }\n    </EditItemView>\n  );\n}\n\nexport default GroupPage;\n","import React, { Fragment, useState } from 'react';\n\nimport t from './common/localization';\nimport { makeStyles, Typography, ListItem, ListItemText, ListItemSecondaryAction, List, Container, Paper, Divider } from '@material-ui/core';\nimport { useParams } from 'react-router-dom';\nimport { useEffectAsync } from './reactHelper';\nimport MainToolbar from './MainToolbar';\nimport { formatPosition } from './common/formatter';\nimport { prefixString } from './common/stringUtils';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n}));\n\nconst PositionPage = () => {\n  const classes = useStyles();\n\n  const { id } = useParams();\n\n  const [item, setItem] = useState();\n\n  useEffectAsync(async () => {\n    if (id) {\n      const response = await fetch(`/api/positions?id=${id}`, {\n        headers: {\n          'Accept': 'application/json'\n        },\n      });\n      if (response.ok) {\n        const items = await response.json();\n        setItem(items[0]);\n      }\n    } else {\n      setItem({});\n    }\n  }, [id]);\n\n  const formatKey = (key) => {\n    return t(prefixString('position', key)) || `${t('sharedAttribute')} \"${key}\"`;\n  };\n\n  const attributesList = () => {\n    const combinedList = {...item, ...item.attributes};\n    return Object.entries(combinedList).filter(([_, value]) => typeof value !== 'object');\n  }\n\n  return (\n    <>\n      <MainToolbar />\n      <Container maxWidth='sm' className={classes.root}>\n        <Paper>\n          {item &&\n            <List>\n              {attributesList().map(([key, value], index, list) => (\n                <Fragment key={key}>\n                  <ListItem>\n                    <ListItemText\n                      primary={formatKey(key)}\n                      />\n                    <ListItemSecondaryAction>\n                      <Typography variant=\"body2\">\n                        {formatPosition(value, key)}\n                      </Typography>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                  {index < list.length - 1 ? <Divider /> : null}\n                </Fragment>\n              ))}\n            </List>\n          }\n        </Paper>\n      </Container>\n    </>\n  );\n}\n\nexport default PositionPage;\n","import React, { useEffect, useState } from 'react';\nimport { FormControl, InputLabel, Select, MenuItem, TextField } from '@material-ui/core';\nimport t from '../common/localization';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\n\nconst FilterForm = ({ deviceId, setDeviceId, from, setFrom, to, setTo }) => {\n  const devices = useSelector(state => Object.values(state.devices.items));\n\n  const [period, setPeriod] = useState('today');\n\n  useEffect(() => {\n    switch (period) {\n      default:\n      case 'today':\n        setFrom(moment().startOf('day'));\n        setTo(moment().endOf('day'));\n        break;\n      case 'yesterday':\n        setFrom(moment().subtract(1, 'day').startOf('day'));\n        setTo(moment().subtract(1, 'day').endOf('day'));\n        break;\n      case 'thisWeek':\n        setFrom(moment().startOf('week'));\n        setTo(moment().endOf('week'));\n        break;\n      case 'previousWeek':\n        setFrom(moment().subtract(1, 'week').startOf('week'));\n        setTo(moment().subtract(1, 'week').endOf('week'));\n        break;\n      case 'thisMonth':\n        setFrom(moment().startOf('month'));\n        setTo(moment().endOf('month'));\n        break;\n      case 'previousMonth':\n        setFrom(moment().subtract(1, 'month').startOf('month'));\n        setTo(moment().subtract(1, 'month').endOf('month'));\n        break;\n    }\n  }, [period, setFrom, setTo]);\n\n  return (\n    <>\n      <FormControl variant='filled' margin='normal' fullWidth>\n        <InputLabel>{t('reportDevice')}</InputLabel>\n        <Select value={deviceId || ''} onChange={e => setDeviceId(e.target.value)}>\n          {devices.map((device) => (\n            <MenuItem key={device.id} value={device.id}>{device.name}</MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <FormControl variant='filled' margin='normal' fullWidth>\n        <InputLabel>{t('reportPeriod')}</InputLabel>\n        <Select value={period} onChange={e => setPeriod(e.target.value)}>\n          <MenuItem key='today' value='today'>{t('reportToday')}</MenuItem>\n          <MenuItem key='yesterday' value='yesterday'>{t('reportYesterday')}</MenuItem>\n          <MenuItem key='thisWeek' value='thisWeek'>{t('reportThisWeek')}</MenuItem>\n          <MenuItem key='previousWeek' value='previousWeek'>{t('reportPreviousWeek')}</MenuItem>\n          <MenuItem key='thisMonth' value='thisMonth'>{t('reportThisMonth')}</MenuItem>\n          <MenuItem key='previousMonth' value='previousMonth'>{t('reportPreviousMonth')}</MenuItem>\n          <MenuItem key='custom' value='custom'>{t('reportCustom')}</MenuItem>\n        </Select>\n      </FormControl>\n      {period === 'custom' &&\n        <TextField\n          margin='normal'\n          variant='filled'\n          label={t('reportFrom')}\n          type='datetime-local'\n          value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n          onChange={e => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n          fullWidth />\n      }\n      {period === 'custom' &&\n        <TextField\n          margin='normal'\n          variant='filled'\n          label={t('reportTo')}\n          type='datetime-local'\n          value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\n          onChange={(e) => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\n          fullWidth />\n      }\n    </>\n  );\n}\n\nexport default FilterForm;\n","import mapboxgl from 'mapbox-gl';\nimport { useEffect } from 'react';\nimport { map } from './Map';\n\nconst ReplayPathMap = ({ positions }) => {\n  const id = 'replay';\n\n  useEffect(() => {\n    map.addSource(id, {\n      'type': 'geojson',\n      'data': {\n        type: 'Feature',\n        geometry: {\n          type: 'LineString',\n          coordinates: [],\n        },\n      },\n    });\n    map.addLayer({\n      'source': id,\n      'id': id,\n      'type': 'line',\n      'layout': {\n        'line-join': 'round',\n        'line-cap': 'round',\n      },\n      'paint': {\n         'line-color': '#333',\n         'line-width': 5,\n      },\n    });\n\n    return () => {\n      map.removeLayer(id);\n      map.removeSource(id);\n    };\n  }, []);\n\n  useEffect(() => {\n    const coordinates = positions.map(item => [item.longitude, item.latitude]);\n    map.getSource(id).setData({\n      type: 'Feature',\n      geometry: {\n        type: 'LineString',\n        coordinates: coordinates,\n      },\n    });\n    if (coordinates.length) {\n      const bounds = coordinates.reduce((bounds, item) => bounds.extend(item), new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n      map.fitBounds(bounds, {\n        padding: { top: 50, bottom: 250, left: 25, right: 25 },\n      });\n    }\n  }, [positions]);\n\n  return null;\n}\n\nexport default ReplayPathMap;\n","import React, { useState } from 'react';\nimport { Accordion, AccordionDetails, AccordionSummary, Button, Container, FormControl, makeStyles, Paper, Slider, Tooltip, Typography } from '@material-ui/core';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MainToolbar from '../MainToolbar';\nimport Map from '../map/Map';\nimport t from '../common/localization';\nimport FilterForm from './FilterForm';\nimport ReplayPathMap from '../map/ReplayPathMap';\nimport PositionsMap from '../map/PositionsMap';\nimport { formatPosition } from '../common/formatter';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  controlPanel: {\n    position: 'absolute',\n    bottom: theme.spacing(5),\n    left: '50%',\n    transform: 'translateX(-50%)',\n  },\n  controlContent: {\n    padding: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  configForm: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}));\n\nconst TimeLabel = ({ children, open, value }) => {\n  return (\n    <Tooltip open={open} enterTouchDelay={0} placement=\"top\" title={value}>\n      {children}\n    </Tooltip>\n  );\n};\n\nconst ReplayPage = () => {\n  const classes = useStyles();\n\n  const [expanded, setExpanded] = useState(true);\n\n  const [deviceId, setDeviceId] = useState();\n  const [from, setFrom] = useState();\n  const [to, setTo] = useState();\n\n  const [positions, setPositions] = useState([]);\n\n  const [index, setIndex] = useState(0);\n\n  const handleShow = async () => {\n    const query = new URLSearchParams({\n      deviceId,\n      from: from.toISOString(),\n      to: to.toISOString(),\n    });\n    const response = await fetch(`/api/positions?${query.toString()}`, { headers: { 'Accept': 'application/json' } });\n    if (response.ok) {\n      setIndex(0);\n      setPositions(await response.json());\n      setExpanded(false);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <MainToolbar />\n      <Map>\n        <ReplayPathMap positions={positions} />\n        {index < positions.length &&\n          <PositionsMap positions={[positions[index]]} />\n        }\n      </Map>\n      <Container maxWidth=\"sm\" className={classes.controlPanel}>\n        {!!positions.length &&\n          <Paper className={classes.controlContent}>\n            <Slider\n              max={positions.length - 1}\n              step={null}\n              marks={positions.map((_, index) => ({ value: index }))}\n              value={index}\n              onChange={(_, index) => setIndex(index)}\n              valueLabelDisplay=\"auto\"\n              valueLabelFormat={i => i < positions.length ? formatPosition(positions[i], 'fixTime') : ''}\n              ValueLabelComponent={TimeLabel}\n              />\n          </Paper>\n        }\n        <div>\n          <Accordion expanded={expanded} onChange={() => setExpanded(!expanded)}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n              <Typography align='center'>\n                {t('reportConfigure')}\n              </Typography>\n            </AccordionSummary>\n            <AccordionDetails className={classes.configForm}>\n              <FilterForm\n                deviceId={deviceId}\n                setDeviceId={setDeviceId}\n                from={from}\n                setFrom={setFrom}\n                to={to}\n                setTo={setTo} />\n              <FormControl margin='normal' fullWidth>\n                <Button type='button' color='primary' variant='contained' disabled={!deviceId} onClick={handleShow}>\n                  {t('reportShow')}\n                </Button>\n              </FormControl>\n            </AccordionDetails>\n          </Accordion>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default ReplayPage;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport MainPage from './MainPage';\nimport LoginPage from './LoginPage';\nimport RouteReportPage from './reports/RouteReportPage';\nimport ServerPage from './admin/ServerPage';\nimport UsersPage from './admin/UsersPage';\nimport DevicePage from './DevicePage';\nimport UserPage from './UserPage';\nimport SocketController from './SocketController';\nimport NotificationsPage from './settings/NotificationsPage';\nimport NotificationPage from './settings/NotificationPage';\nimport GroupsPage from './settings/GroupsPage';\nimport GroupPage from './settings/GroupPage';\nimport PositionPage from './PositionPage';\nimport ReplayPage from './reports/ReplayPage';\nimport { useSelector } from 'react-redux';\nimport { LinearProgress } from '@material-ui/core';\n\nconst App = () => {\n  const initialized = useSelector(state => !!state.session.server && !!state.session.user);\n\n  return (\n    <>\n      <CssBaseline />\n      <SocketController />\n      <Switch>\n        <Route exact path='/login' component={LoginPage} />\n        <Route>\n          {!initialized ? (<LinearProgress />) : (\n            <Switch>\n              <Route exact path='/' component={MainPage} />\n              <Route exact path='/replay' component={ReplayPage} />\n              <Route exact path='/position/:id?' component={PositionPage} />\n              <Route exact path='/user/:id?' component={UserPage} />\n              <Route exact path='/device/:id?' component={DevicePage} />\n              <Route exact path='/reports/route' component={RouteReportPage} />\n              <Route exact path='/settings/notifications' component={NotificationsPage} />\n              <Route exact path='/settings/notification/:id?' component={NotificationPage} />\n              <Route exact path='/settings/groups' component={GroupsPage} />\n              <Route exact path='/settings/group/:id?' component={GroupPage} />\n              <Route exact path='/admin/server' component={ServerPage} />\n              <Route exact path='/admin/users' component={UsersPage} />\n            </Switch>\n          )}\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}","import 'typeface-roboto'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\n\nReactDOM.render((\n  <Provider store={store}>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </Provider>\n), document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}